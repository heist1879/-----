<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>

<style>
  body {
    font-family: "Arial", sans-serif;
    max-width: 600px;
    margin: 40px auto;
    padding: 0 20px;
    line-height: 1.8;
    background-color: #fffefb;
    text-align: center;
  }

  h2 {
    font-size: 26px;
    margin-bottom: 10px;
  }

  .dog-img {
    width: 140px;
    margin: 15px auto 25px;
    display: block;
    opacity: 0.9;
  }

  label {
    font-size: 18px;
  }

  input[type="date"] {
    padding: 8px;
    font-size: 16px;
    margin-top: 8px;
    width: 60%;
  }

  button {
    margin-top: 18px;
    padding: 10px 24px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    background-color: #ffd56b;
    border-radius: 8px;
    transition: 0.2s;
  }

  button:hover {
    background-color: #ffc648;
  }

  .result {
    margin-top: 25px;
    padding: 20px;
    border-radius: 10px;
    background: #fff4d6;
    font-size: 18px;
    border: 1px solid #f0d8a8;
    display: none;
    text-align: left;
  }
</style>
</head>

<body>

<h2>ğŸ¶ å¦™éº—å¹´é½¡è¨ˆç®—æ©Ÿ</h2>

<!-- å¯æ„›é»ƒé‡‘çµçŠ¬åœ–ç‰‡ï¼Œä½ å¯æ›¿æ›æˆè‡ªå·±çš„ -->
<img class="dog-img" src="https://cdn-icons-png.flaticon.com/512/620/620851.png" alt="golden retriever">

<label for="dob">ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼š</label><br>
<input type="date" id="dob"><br>

<button onclick="calculateAge()">é–‹å§‹è¨ˆç®—</button>

<div id="output" class="result"></div>

<script>
// å°å‹çŠ¬äººé¡å¹´é½¡å°ç…§è¡¨
const humanAgeMap = {
  1: 15, 2: 24, 3: 28, 4: 32, 5: 36,
  6: 40, 7: 44, 8: 48, 9: 52, 10: 56,
  11: 60, 12: 64, 13: 68, 14: 72, 15: 76, 16: 80
};

// åˆå§‹åŒ–ï¼šè¼‰å…¥ä¸Šæ¬¡çµæœ
window.onload = function () {
  const saved = localStorage.getItem("meiliResult");
  if (saved) {
    const output = document.getElementById("output");
    output.style.display = "block";
    output.innerHTML = saved;
  }

  const savedDob = localStorage.getItem("meiliDob");
  if (savedDob) {
    document.getElementById("dob").value = savedDob;
  }
};

function calculateAge() {
  const dob = document.getElementById("dob").value;
  if (!dob) {
    alert("è«‹å…ˆè¼¸å…¥ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸ!");
    return;
  }

  const birthDate = new Date(dob);
  const today = new Date();

  // è¨ˆç®—å¯¦éš›å¹´é½¡
  let age = today.getFullYear() - birthDate.getFullYear();
  const monthDiff = today.getMonth() - birthDate.getMonth();

  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
    age--;
  }

  // å¹´é½¡é™åˆ¶ 1-16
  const dogAge = Math.max(1, Math.min(age, 16));
  const humanAge = humanAgeMap[dogAge];

  const resultHTML = `
    å¦™éº—ç¾åœ¨å¤§ç´„ <strong>${dogAge} æ­²</strong> ç‹—å¹´é½¡ï¼Œ<br>
    æ›ç®—æˆäººé¡å¹´é½¡å¤§ç´„æ˜¯ <strong>${humanAge} æ­²</strong>ã€‚
  `;

  // é¡¯ç¤ºçµæœ
  const output = document.getElementById("output");
  output.style.display = "block";
  output.innerHTML = resultHTML;

  // å­˜å…¥ localStorage
  localStorage.setItem("meiliResult", resultHTML);
  localStorage.setItem("meiliDob", dob);
}
</script>

</body>
</html>
